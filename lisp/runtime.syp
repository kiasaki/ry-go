(def quit-chan (make-chan))

(defn quit []
  (stop-editor)
  (send! quit-chan '()))


(defn handle-keypresses []
  (let [k (<! (editor-keypresses-chan))]
    (set-cell 1 5 k 100 110)
    (handle-keypresses)))

;; Debugging (no way of quitting for now)
(go (begin
  (sleep 5000)
  (quit)
  (println "Timeout!")))

(start-editor)
(clear-editor 244 234)
(set-cell 1 4 #d 100 110)

(go (handle-keypresses))
